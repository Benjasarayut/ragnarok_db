<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ragnarok Login</title>
    <link rel="stylesheet" href="styles/login.css">
</head>

<body>

    <!-- üåÄ Loading Screen -->
    <div id="loading-screen">
        <img src="https://img.gravity.co.kr/gravity/official_renewal/assets/images/game/roo/logo.webp" alt="Ragnarok Logo" class="loading-logo">
        <div class="loader"></div>
        <p>Loading...</p>
    </div>

    <!-- üé• ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á -->
    <video autoplay muted loop id="bg-video">
        <source src="https://roc.gnjoy.in.th/roc-collector/assets/img/wallpaper/Roc-wallpaper-video2022.mp4"
            type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- üåå Navbar -->
    <header class="navbar">
        <div class="logo">Ragnarok Origin Classci</div>
    </header>

    <!-- üîê Login Box (‡πÅ‡∏™‡∏î‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏´‡∏±‡∏™ ‡πÅ‡∏ï‡πà‡∏û‡∏£‡∏µ‡∏ü‡∏¥‡∏•‡πÄ‡∏õ‡πá‡∏ô 123456) -->
    <div class="login-container">
        <div class="login-box">
            <h2>Login</h2>
            <form id="loginForm" autocomplete="on">
                <input type="email" id="email" placeholder="Email" required style="margin-bottom:12px;">
    
                <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏û‡∏£‡∏µ‡∏ü‡∏¥‡∏•‡∏î‡πâ‡∏ß‡∏¢ 123456 -->
                <input type="password" id="password" placeholder="Password" value="123456" required
                    style="margin-bottom:14px;">
    
                <!-- ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (‡πÑ‡∏°‡πà‡∏ã‡πà‡∏≠‡∏ô) ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô type ‡πÄ‡∏õ‡πá‡∏ô text ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° toggle -->
                <!-- ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏° attribute readonly: readonly -->
    
                <button type="submit">Login</button>
    
                <p id="message" style="margin-top:12px;"></p>
            </form>
        </div>
    </div>
    
    <script>
        // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ loading-screen ‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡πÑ‡∏ß‡πâ (‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°)
        window.addEventListener("load", () => {
            const loading = document.getElementById("loading-screen");
            if (loading) {
                setTimeout(() => {
                    loading.classList.add("fade-out");
                    setTimeout(() => loading.style.display = "none", 800);
                }, 800);
            }
        });

        // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• login (‡∏à‡∏∞‡∏™‡πà‡∏á password ‡∏ó‡∏µ‡πà‡∏û‡∏£‡∏µ‡∏ü‡∏¥‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏Å‡πâ)
        document.getElementById("loginForm").addEventListener("submit", async (e) => {
            e.preventDefault();

            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value;
            const message = document.getElementById("message");

            // ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
            if (!email) {
                message.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•";
                message.style.color = "#ff6b6b";
                return;
            }
            if (!password) {
                message.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô";
                message.style.color = "#ff6b6b";
                return;
            }

            try {
                const res = await fetch("../auth/login.php", {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: `email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`
                });

                // ‡∏ñ‡πâ‡∏≤ server ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà JSON ‡∏à‡∏∞‡∏à‡∏±‡∏ö error
                const data = await res.json();

                if (data.success) {
                    message.textContent = data.message || "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
                    message.style.color = "lightgreen";
                    // ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
                    setTimeout(() => {
                        window.location.href = data.redirect || "/";
                    }, 700);
                } else {
                    message.textContent = data.error || "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
                    message.style.color = "#ff6b6b";
                }
            } catch (err) {
                console.error("Login error:", err);
                message.textContent = "‚ö† ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå";
                message.style.color = "#ff6b6b";
            }
        });
    </script>
</body>

</html>