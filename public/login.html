<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ragnarok Login</title>
    <link rel="stylesheet" href="styles/login.css">
</head>

<body>

    <!-- üåÄ Loading Screen -->
    <div id="loading-screen">
        <img src="https://img.gravity.co.kr/gravity/official_renewal/assets/images/game/roo/logo.webp" alt="Ragnarok Logo" class="loading-logo">
        <div class="loader"></div>
        <p>Loading...</p>
    </div>

    <!-- üé• ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á -->
    <video autoplay muted loop id="bg-video">
        <source src="https://roc.gnjoy.in.th/roc-collector/assets/img/wallpaper/Roc-wallpaper-video2022.mp4"
            type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- üåå Navbar -->
    <header class="navbar">
        <div class="logo">üéÆ Ragnarok Origin</div>
        <nav>
            <a href="#">Home</a>
            <a href="#">About</a>
            <a href="#">Services</a>
            <a href="#">Contact</a>
            <a class="active" href="#">Login</a>
        </nav>
    </header>

    <!-- üîê Login Box -->
    <div class="login-container">
        <div class="login-box">
            <h2>Login</h2>
            <form id="loginForm">
                <input type="email" id="email" placeholder="Email" required>
                <input type="password" id="password" placeholder="Password" required>
                <div class="options">
                    <label><input type="checkbox"> Remember me</label>
                    <a href="#">Forgot Password?</a>
                </div>
                <button type="submit">Login</button>
                <p id="message"></p>
                <p class="register">Don‚Äôt have an account? <a href="#">Register</a></p>
            </form>
        </div>
    </div>

    <script>
        // üåÄ Fade-out loading screen ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
        window.addEventListener("load", () => {
            const loading = document.getElementById("loading-screen");
            setTimeout(() => {
                loading.classList.add("fade-out");
                setTimeout(() => loading.style.display = "none", 800);
            }, 1500);
        });

        // üîê Login system
        document.getElementById("loginForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            const message = document.getElementById("message");

            try {
                const res = await fetch("../auth/login.php", {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: `email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`
                });
                const data = await res.json();
                if (data.success) {
                    message.textContent = data.message;
                    message.style.color = "lightgreen";
                    setTimeout(() => window.location.href = data.redirect, 800);
                } else {
                    message.textContent = data.error || "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
                    message.style.color = "#ff6b6b";
                }
            } catch (err) {
                message.textContent = "‚ö† ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå";
                message.style.color = "#ff6b6b";
            }
        });
    </script>
</body>

</html>