<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ragnarok Login</title>
  <link rel="stylesheet" href="styles/login.css" />
</head>

<body>
  <!-- üåÄ Loading Screen -->
  <div id="loading-screen">
    <img src="https://img.gravity.co.kr/gravity/official_renewal/assets/images/game/roo/logo.webp" alt="Ragnarok Logo"
      class="loading-logo" />
    <div class="loader"></div>
    <p>Loading...</p>
  </div>

  <!-- üé• ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á -->
  <video autoplay muted loop id="bg-video">
    <source src="https://roc.gnjoy.in.th/roc-collector/assets/img/wallpaper/Roc-wallpaper-video2022.mp4"
      type="video/mp4" />
  </video>

  <!-- üåå Navbar -->
  <header class="navbar">
    <div class="logo">Ragnarok Origin Classic</div>
  </header>

  <!-- üîê Login Container -->
  <div class="login-container">
    <div class="login-box">
      <h2>Login</h2>
      <form id="loginForm" autocomplete="on">
        <input type="email" id="email" placeholder="Email" required />
        <input type="password" id="password" placeholder="Password" value="123456" required />
        <button type="submit" class="submit-btn">Login</button>
        </form><br>
        <p class="register-link">
          <a href="register.html">Register</a>
        </p>
        <p id="message"></p>
      </form>
    </div>
  </div>

  <script>
    // üåÄ Loading fade out
    window.addEventListener("load", () => {
      const loading = document.getElementById("loading-screen");
      setTimeout(() => {
        loading.classList.add("fade-out");
        setTimeout(() => (loading.style.display = "none"), 800);
      }, 800);
    });

    // üîê Login
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;
      const msg = document.getElementById("message");

      try {
        const res = await fetch("../auth/login.php", {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: `email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`
        });
        const data = await res.json();
        if (data.success) {
          msg.textContent = "‚úÖ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
          msg.style.color = "lightgreen";
          setTimeout(() => (window.location.href = data.redirect || "home.php"), 800);
        } else {
          msg.textContent = data.error || "‚ùå ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
          msg.style.color = "#ff6b6b";
        }
      } catch {
        msg.textContent = "‚ö†Ô∏è ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á";
        msg.style.color = "#ff6b6b";
      }
    });
  </script>
</body>

</html>